import type { RootState } from "..";
import { createSelector } from "@reduxjs/toolkit";

// Base selectors
const selectAdvertsState = (state: RootState) => state.adverts;

// Memoized selectors
export const getAdverts = createSelector(
  [selectAdvertsState],
  (advertsState) => advertsState.adverts ?? []
);

export const getTags = createSelector(
  [selectAdvertsState],
  (advertsState) => advertsState.tags
);

export const getSelectedAdvert = createSelector(
  [selectAdvertsState],
  (advertsState) => advertsState.selectedAdvert
);

export const getAdvertsLoading = createSelector(
  [selectAdvertsState],
  (advertsState) => advertsState.loading
);

export const getAdvertsError = createSelector(
  [selectAdvertsState],
  (advertsState) => advertsState.error
);

export const getAdvertById = (advertId?: string) =>
  createSelector(
    [getAdverts],
    (adverts) => adverts.find((advert) => advert.id === advertId)
  );